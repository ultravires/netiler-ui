!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define("NETILER",["vue"],t):"object"==typeof exports?exports.NETILER=t(require("vue")):e.NETILER=t(e.Vue)}("undefined"!=typeof self?self:this,(function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("aside",{staticClass:"nt-aside",style:{width:e.width}},[e._t("default")],2)};function r(e,t,n,i,r,o,a,s){var d,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=d):r&&(d=s?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}i._withStripped=!0;var o=r({name:"NtAside",props:{width:{type:String,default:"0"}}},i,[],!1,null,null,null);o.options.__file="src/packages/aside/src/index.vue";var a=o.exports;a.install=function(e){e.component(a.name,a)};var s=a,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nt-box"},[e._t("header",(function(){return[n("header",{staticClass:"nt-box__header"},[n("h3",{staticClass:"title"},[e.icon?n("span",{staticClass:"nt-box__preffix"},[n("i",{class:e.icon})]):e._e(),e._v("\n          "+e._s(e.title)+"\n        ")]),e.more?n("span",{on:{click:e.handleMoreClick}},[e._v(e._s(e.more))]):e._e()])]})),n("div",{staticClass:"nt-box__content"},[e._t("default")],2)],2)};d._withStripped=!0;var l=r({name:"NtBox",props:{title:{type:String,default:""},more:{type:String,default:"更多》"},icon:{type:String,default:""}},methods:{handleMoreClick:function(){this.$emit("more-click")}}},d,[],!1,null,null,null);l.options.__file="src/packages/box/src/index.vue";var c=l.exports;c.install=function(e){e.component(c.name,c)};var u=c,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"nt-button",class:e.getComputedClass,on:{click:e.handleClick}},[e.icon?n("i",{class:e.icon}):e._e(),e._t("default")],2)};h._withStripped=!0;var f=r({name:"NtButton",props:{type:{type:String,default:"default",validator:function(e){return["default","primary","success","info","warning","danger","text"].includes(e)}},round:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},icon:{type:String,default:""},plain:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{getComputedClass:function(){var e=[],t="nt-button--".concat(this.type||"default"),n=this.round?"is-round":null,i=this.circle?"is-circle":null,r=this.plain?"is-plain":null,o=this.ghost?"is-ghost":null;return e.push(t),n&&e.push(n),i&&e.push(i),r&&e.push(r),o&&e.push(o),e}},methods:{handleClick:function(e){this.$emit("click",e)}}},h,[],!1,null,null,null);f.options.__file="src/packages/button/src/index.vue";var p=f.exports;p.install=function(e){e.component(p.name,p)};var v=p,y=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"nt-carousel__item",class:{"is-actived":e.isActived,"is-animating":e.isAnimating},style:e.styles},[e._t("default")],2)};y._withStripped=!0;var g=r({name:"NtCarouselItem",data:function(){return{isAnimating:!1,isActived:!1,translate:0}},computed:{direction:function(){return this.$parent.direction},styles:function(){var e={};return"vertical"===this.direction?e.transform="translateY(".concat(this.translate,"px)"):e.transform="translateX(".concat(this.translate,"px)"),e}},methods:{processIndex:function(e,t,n){return 0===t&&e===n-1?e=-1:t===n-1&&0===e&&(e=n),e},calcTranslate:function(e,t){var n=this.$el;if("vertical"===this.direction){var i=n.offsetHeight;this.translate=-(t-e)*i}else{var r=n.offsetWidth;this.translate=-(t-e)*r}},transformItem:function(e,t,n){var i=this.$parent.items.length,r=this.$parent.loop;this.isAnimating=e===t||e===n,e!==t&&i>2&&r&&(e=this.processIndex(e,t,i)),this.calcTranslate(e,t),this.isActived=e===t}}},y,[],!1,null,null,null);g.options.__file="src/packages/carousel-item/src/index.vue";var m=g.exports;m.install=function(e){e.component(m.name,m)};var k=m,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nt-carousel",class:e.carouselClasses},[n("button",{staticClass:"nt-carousel__control nt-carousel__control--prev",on:{click:e.prev}},[n("i",{staticClass:"nt-icon nt-icon-arrow_left"})]),n("button",{staticClass:"nt-carousel__control nt-carousel__control--next",on:{click:e.next}},[n("i",{staticClass:"nt-icon nt-icon-arrow_right"})]),n("div",{staticClass:"nt-carousel__container",style:{height:e.height}},[e._t("default")],2),e.isShowIndicators?n("ul",{staticClass:"nt-carousel__indicators"},e._l(e.items,(function(t,i){return n("li",{key:i,staticClass:"nt-carousel__indicator",class:{"is-actived":e.activedIndex===i},on:{mouseenter:function(t){return e.handleIndicatorHover(i)},click:function(t){return e.handleIndicatorClick(i)}}})})),0):e._e()])};C._withStripped=!0;var _=r({name:"NtCarousel",props:{autoPlay:{type:Boolean,default:!0},controls:{type:String,default:"always",validator:function(e){return["never","hover","always"].includes(e)}},defaultIndex:{type:Number,default:0},direction:{type:String,default:"horizontal",validator:function(e){return["horizontal","vertical"].includes(e)}},height:{type:String,default:""},loop:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator:function(e){return["hover","click"].includes(e)}},type:{type:String,default:""}},data:function(){return{isShowIndicators:!0,items:[],activedIndex:-1}},computed:{carouselClasses:function(){var e=["nt-carousel"];return this.type&&e.push("nt-carousel--".concat(this.type)),this.direction&&e.push("is-".concat(this.direction)),e},indicatorClasses:function(){var e=["nt-carousel__indicators"];return this.type&&e.push("nt-carousel__indicators--".concat(this.type)),e}},watch:{items:function(e){e.length<=0?this.isShowIndicators=!1:this.setActivedItem(this.defaultIndex)},activedIndex:function(e,t){this.resetItemPosition(t),t>-1&&this.$emit("change",e,t)}},mounted:function(){this.updateItems()},methods:{resetItemPosition:function(e){var t=this;this.items.forEach((function(n,i){n.transformItem(i,t.activedIndex,e)}))},setActivedItem:function(e){if(e=Number(e),isNaN(e)||e!==Math.floor(e))console.warn("[Netiler Warn] - [Carousel] index must be an integer.");else{var t=this.items.length,n=this.activedIndex;this.activedIndex=e<0?this.loop?t-1:0:e>=t?this.loop?0:t-1:e,n===this.activedIndex&&this.resetItemPosition(n)}},prev:function(){this.setActivedItem(this.activedIndex-1)},next:function(){this.setActivedItem(this.activedIndex+1)},end:function(e){alert(1),this.$emit("end",e)},updateItems:function(){this.items=this.$children.filter((function(e){return"NtCarouselItem"===e.$options.name}))},handleIndicatorHover:function(e){"hover"===this.trigger&&(this.activedIndex=e)},handleIndicatorClick:function(e){"click"===this.trigger&&(this.activedIndex=e)}}},C,[],!1,null,null,null);_.options.__file="src/packages/carousel/src/index.vue";var x=_.exports;x.install=function(e){e.component(x.name,x)};var N=x,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"nt-figure"},[n("img",{staticClass:"nt-figure__img",attrs:{src:e.src,width:e.imgWidth,height:e.imgHeight,alt:e.alt}}),n("figcaption",{staticClass:"nt-figure__caption",class:"nt-figure__caption--"+e.align},[e._v("\n    "+e._s(e.caption)+"\n  ")])])};b._withStripped=!0;var w=r({name:"NtFigure",props:{src:{type:String,default:""},alt:{type:String,default:""},imgWidth:{type:String,default:""},imgHeight:{type:String,default:""},caption:{type:String,default:""},align:{type:String,default:"left",validator:function(e){return["left","center","right"].includes(e)}}}},b,[],!1,null,null,null);w.options.__file="src/packages/figure/src/index.vue";var S=w.exports;S.install=function(e){e.component(S.name,S)};var E=S,$=function(){var e=this,t=e.$createElement;return(e._self._c||t)("header",{staticClass:"nt-header",style:{height:e.height}},[e._t("default")],2)};$._withStripped=!0;var I=r({name:"NtHeader",props:{height:{type:String,default:0}}},$,[],!1,null,null,null);I.options.__file="src/packages/header/src/index.vue";var K=I.exports;K.install=function(e){e.component(K.name,K)};var A=K,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nt-image",style:{width:e.width,height:e.height}},[n("img",{class:["nt-image__inner",{"is-lazy":e.lazy}],style:"object-fit:"+e.fit,attrs:{"data-src":e.src,alt:e.alt},on:{load:e.handleLoad,error:e.handleError}}),e.isLoading?[e._t("placeholder",(function(){return[n("div",{staticClass:"nt-image__placeholder"},[e._v("\n        "+e._s(e.placeholder)+"\n      ")])]}))]:e._e(),e.isError?[e._t("error",(function(){return[n("div",{staticClass:"nt-image__error"},[e._v("\n        "+e._s(e.error)+"\n      ")])]}))]:e._e()],2)};D._withStripped=!0;var L=/([\:\-\_]+(.))/g,T=/^moz([A-Z])/,O=function(e){return e.replace(L,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(T,"Moz$1")};function B(e,t){if(e instanceof Element&&t)for(var n=(t||"").split(" "),i=0,r=n.length;i<r;++i){var o=n[i];o&&e.classList.remove(o)}}function P(e,t){if(!e||!t)return null;"float"===(t=O(t))&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(n){return e.style[t]}}function j(e,t){return P(e,null!=t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto|overlay)/)}var M=r({name:"NtImage",props:{src:{type:String,default:""},alt:{type:String,default:""},fit:{type:String,default:"contain"},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},lazy:{type:Boolean,default:!1},scrollContainer:null},data:function(){return{isError:!1,isLoading:!0,placeholder:"图片正在加载...",error:"图片加载失败"}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},methods:{handleError:function(e){var t=e.currentTarget,n=t.parentNode;n.removeChild(t),t=null,n=null,this.isLoading=!1,this.isError=!0,this.$emit("error",e)},handleLoad:function(){this.isLoading=!1,this.isError=!1},loadImage:function(){this.$el.firstChild.src=this.src},addLazyLoadListener:function(){var e,t=this.scrollContainer,n=null;if(n=(e=t)&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement?t:function(e){return"[object String]"===Object.prototype.toString.call(e)}(t)?document.querySelector(t):function(e,t){for(var n=e;n;){if([window,document,document.documentElement].includes(n))return n;if(j(n,t))return n;n=n.parentNode}}(this.$el)){if(this._scrollContainer=n,"undefined"==typeof IntersectionObserver)return void console.warn("[lazyLoad] 当前浏览器版本不支持 `IntersectionObserver`.");var i=this.$el.firstChild;new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var n=e.target.dataset.src;e.target.src=n,t.unobserve(e.target)}}))}),{root:n,rootMargin:"0px 0px 0px 0px",threshold:[0]}).observe(i)}}}},D,[],!1,null,null,null);M.options.__file="src/packages/image/src/index.vue";var z=M.exports;z.install=function(e){e.component(z.name,z)};var q=z,H=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"nt-layout",class:e.classes,style:e.styles},[e._t("default")],2)};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}H._withStripped=!0;var U=r({name:"NtLayout",props:{type:{type:String,default:""},gap:{type:[Array,Number],default:null},justify:{type:String,default:""},align:{type:String,default:""}},computed:{classes:function(){return this.type&&"nt-layout--".concat(this.type)},styles:function(){var e={},t=0,n=0;if(Array.isArray(this.gap)){var i=R(this.gap,2);t=i[0];var r=i[1];n=void 0===r?0:r}else t=n=this.gap;return e["row-gap"]=t?t+"px":t,e["column-gap"]=n?n+"px":n,this.justify&&("flex"===this.type?e["justify-content"]=this.justify:e["justify-items"]=this.justify),this.align&&("flex"===this.type?e["align-items"]=this.align:e["align-content"]=this.align),e}}},H,[],!1,null,null,null);U.options.__file="src/packages/layout/src/index.vue";var V=U.exports;V.install=function(e){e.component(V.name,V)};var W=V,X=function(){var e=this,t=e.$createElement;return(e._self._c||t)("li",{staticClass:"nt-list__item"},[e._t("default")],2)};X._withStripped=!0;var Y=r({name:"NtListItem"},X,[],!1,null,null,null);Y.options.__file="src/packages/list-item/src/index.vue";var Z=Y.exports;Z.install=function(e){e.component(Z.name,Z)};var G=Z,J={name:"NtList",props:{order:{type:Boolean,default:!1},start:{type:[String,Number],default:1}},render:function(e){var t=this;return e(this.order?"ol":"ul",{class:"nt-list",attrs:{start:this.order?this.start+"":null},on:{click:function(e){var n=e.target||e.srcElement,i=e.currentTarget||document;if("LI"===n.tagName.toUpperCase()){var r=i.querySelectorAll("li"),o=Array.prototype.indexOf.call(r,n);t.$emit("item-click",o)}}}},this.$slots.default)},install:function(e){e.component(J.name,J)}},Q=J,ee=n(0),te=n.n(ee),ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"nt-message-slide-fade-"+e.direction},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["nt-message","nt-message--"+e.type,"nt-message--"+e.direction],style:e.positionStyles},[n("i",{staticClass:"nt-icon nt-message__icon",class:e.typeClasses}),e._t("default",(function(){return[n("p",[e._v(e._s(e.message))])]}))],2)])};ne._withStripped=!0;var ie={success:"success",info:"info",warning:"warning",error:"error"},re=r({name:"NtMessage",data:function(){return{visible:!1,closed:!1,onClose:null,message:"",type:"info",direction:"top",duration:3e3,offsetPosition:20}},computed:{typeClasses:function(){return this.type&&"nt-icon-".concat(ie[this.type])},positionStyles:function(){return{top:"".concat(this.offsetPosition,"px"),right:"".concat("right"===this.direction.toLowerCase()?"20px":null)}}},watch:{closed:function(e){e&&(this.visible=!1)}},mounted:function(){this.startTimer()},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.timer=setTimeout((function(){e.onClosed||e.close()}),this.duration)}}},ne,[],!1,null,null,null);re.options.__file="src/packages/message/src/index.vue";var oe=re.exports,ae=te.a.extend(oe),se=null,de=[],le=1,ce=function e(t){"string"==typeof(t=t||{})&&(t={message:t});var n="nt-message_".concat(le++),i=t.onClose;t.onClose=function(){e.close(n,i)},(se=new ae({data:function(){return t}})).$mount(),document.body.appendChild(se.$el);var r=t.offset||20;return de.forEach((function(e){r+=e.$el.offsetHeight+16})),se.offsetPosition=r,se.visible=!0,de.push(se),se};["success","warning","error","info"].forEach((function(e){ce[e]=function(t){return"string"==typeof t&&(t={message:t}),t.type=e,ce(t)}})),ce.close=function(e,t){for(var n=0,i=null,r=de.length,o=1;o<r;++o)n=de[o-1].$el.offsetHeight,(i=de[o].$el).style.top=parseInt(i.style.top,10)-n-16+"px";"function"==typeof t&&t(de[0]),de.shift()};var ue=ce,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nt-tree",class:{"nt-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,(function(t){return n("nt-tree-node",{key:e.getNodeKey(t),attrs:{node:t,props:e.props,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})})),e.isEmpty?n("div",{staticClass:"nt-tree__empty-block"},[n("span",{staticClass:"nt-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"nt-tree__drop-indicator"})],2)};he._withStripped=!0;var fe=function(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t]||{};for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];void 0!==o&&(e[r]=o)}}return e},pe="$treeNodeId",ve=function(e,t){t&&!t[pe]&&Object.defineProperty(t,pe,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},ye=function(e,t){return e?t[e]:t[pe]};function ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var me=function(e){for(var t=!0,n=!0,i=!0,r=0,o=e.length;r<o;r++){var a=e[r];(!0!==a.checked||a.indeterminate)&&(t=!1,a.disabled||(i=!1)),(!1!==a.checked||a.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:i,half:!t&&!n}},ke=function e(t){if(0!==t.childNodes.length){var n=me(t.childNodes),i=n.all,r=n.none,o=n.half;i?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):r&&(t.checked=!1,t.indeterminate=!1);var a=t.parent;a&&0!==a.level&&(t.store.checkStrictly||e(a))}},Ce=function(e,t){var n=e.store.props,i=e.data||{},r=n[t];if("function"==typeof r)return r(i,e);if("string"==typeof r)return i[r];if(void 0===r){var o=i[t];return void 0===o?"":o}},_e=0,xe=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=_e++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var i=this.store;if(!i)throw new Error("[Node]store is required!");i.registerNode(this);var r=i.props;if(r&&void 0!==r.isLeaf){var o=Ce(this,"isLeaf");"boolean"==typeof o&&(this.isLeafByUser=o)}if(!0!==i.lazy&&this.data?(this.setData(this.data),i.defaultExpandAll&&(this.expanded=!0)):this.level>0&&i.lazy&&i.defaultExpandAll&&this.expand(),Array.isArray(this.data)||ve(this,this.data),this.data){var a=i.defaultExpandedKeys,s=i.key;s&&a&&-1!==a.indexOf(this.key)&&this.expand(null,i.autoExpandParent),s&&void 0!==i.currentNodeKey&&this.key===i.currentNodeKey&&(i.currentNode=this,i.currentNode.isCurrent=!0),i.lazy&&i._initDefaultCheckedNode(this),this.updateLeafState()}}var t,n,i;return t=e,(n=[{key:"setData",value:function(e){var t;Array.isArray(e)||ve(this,e),this.data=e,this.childNodes=[];for(var n=0,i=(t=0===this.level&&this.data instanceof Array?this.data:Ce(this,"children")||[]).length;n<i;n++)this.insertChild({data:t[n]})}},{key:"label",get:function(){return Ce(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return Ce(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}},{key:"contains",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function n(i){for(var r=i.childNodes||[],o=!1,a=0,s=r.length;a<s;a++){var d=r[a];if(d===e||t&&n(d)){o=!0;break}}return o};return n(this)}},{key:"remove",value:function(){var e=this.parent;e&&e.removeChild(this)}},{key:"insertChild",value:function(t,n,i){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!i){var r=this.getChildren(!0)||[];-1===r.indexOf(t.data)&&(void 0===n||n<0?r.push(t.data):r.splice(n,0,t.data))}fe(t,{parent:this,store:this.store}),t=new e(t)}t.level=this.level+1,void 0===n||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}},{key:"insertBefore",value:function(e,t){var n;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)}},{key:"insertAfter",value:function(e,t){var n;t&&-1!==(n=this.childNodes.indexOf(t))&&(n+=1),this.insertChild(e,n)}},{key:"removeChild",value:function(e){var t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);var i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()}},{key:"removeChildByData",value:function(e){for(var t=null,n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===e){t=this.childNodes[n];break}t&&this.removeChild(t)}},{key:"expand",value:function(e,t){var n=this,i=function(){if(t)for(var i=n.parent;i.level>0;)i.expanded=!0,i=i.parent;n.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData((function(e){e instanceof Array&&(n.checked?n.setChecked(!0,!0):n.store.checkStrictly||ke(n),i())})):i()}},{key:"doCreateChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e){t.insertChild(fe({data:e},n),void 0,!0)}))}},{key:"collapse",value:function(){this.expanded=!1}},{key:"shouldLoadData",value:function(){return!0===this.store.lazy&&this.store.load&&!this.loaded}},{key:"updateLeafState",value:function(){if(!0!==this.store.lazy||!0===this.loaded||void 0===this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser}},{key:"setChecked",value:function(e,t,n,i){var r=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=me(this.childNodes),a=o.all,s=o.allWithoutDisable;this.isLeaf||a||!s||(this.checked=!1,e=!1);var d=function(){if(t){for(var n=r.childNodes,o=0,a=n.length;o<a;o++){var s=n[o];i=i||!1!==e;var d=s.disabled?s.checked:i;s.setChecked(d,t,!0,i)}var l=me(n),c=l.half,u=l.all;u||(r.checked=u,r.indeterminate=c)}};if(this.shouldLoadData())return void this.loadData((function(){d(),ke(r)}),{checked:!1!==e});d()}var l=this.parent;l&&0!==l.level&&(n||ke(l))}}},{key:"getChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var n=this.store.props,i="children";return n&&(i=n.children||"children"),void 0===t[i]&&(t[i]=null),e&&!t[i]&&(t[i]=[]),t[i]}},{key:"updateChildren",value:function(){var e=this,t=this.getChildren()||[],n=this.childNodes.map((function(e){return e.data})),i={},r=[];t.forEach((function(e,t){var o=e[pe];o&&function(e,t){for(var n=0;n!==e.length;++n)if(t(e[n]))return n;return-1}(n,(function(e){return e[pe]===o}))>=0?i[o]={index:t,data:e}:r.push({index:t,data:e})})),this.store.lazy||n.forEach((function(t){i[t[pe]]||e.removeChildByData(t)})),r.forEach((function(t){var n=t.index,i=t.data;e.insertChild({data:i},n)})),this.updateLeafState()}},{key:"loadData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(n).length)e&&e.call(this);else{this.loading=!0;var i=function(i){t.loaded=!0,t.loading=!1,t.childNodes=[],t.doCreateChildren(i,n),t.updateLeafState(),e&&e.call(t,i)};this.store.load(this,i)}}}])&&ge(t.prototype,n),i&&ge(t,i),e}();function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var we=function(){function e(t){var n=this;for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(i)&&(this[i]=t[i]);(this.nodesMap={},this.root=new xe({data:this.data,store:this}),this.lazy&&this.load)?(0,this.load)(this.root,(function(e){n.root.doCreateChildren(e),n._initDefaultCheckedNodes()})):this._initDefaultCheckedNodes()}var t,n,i;return t=e,(n=[{key:"filter",value:function(e){var t=this.filterNodeMethod,n=this.lazy;!function i(r){var o,a=r.root?r.root.childNodes:r.childNodes;(a.forEach((function(n){n.visible=t.call(n,e,n.data,n),i(n)})),!r.visible&&a.length)&&(o=!a.some((function(e){return e.visible})),r.root?r.root.visible=!1===o:r.visible=!1===o);e&&(!r.visible||r.isLeaf||n||r.expand())}(this)}},{key:"setData",value:function(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}},{key:"getNode",value:function(e){if(e instanceof xe)return e;var t="object"!==Ne(e)?e:ye(this.key,e);return this.nodesMap[t]||null}},{key:"insertBefore",value:function(e,t){var n=this.getNode(t);n.parent.insertBefore({data:e},n)}},{key:"insertAfter",value:function(e,t){var n=this.getNode(t);n.parent.insertAfter({data:e},n)}},{key:"remove",value:function(e){var t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}},{key:"append",value:function(e,t){var n=t?this.getNode(t):this.root;n&&n.insertChild({data:e})}},{key:"_initDefaultCheckedNodes",value:function(){var e=this,t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach((function(t){var i=n[t];i&&i.setChecked(!0,!e.checkStrictly)}))}},{key:"_initDefaultCheckedNode",value:function(e){-1!==(this.defaultCheckedKeys||[]).indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)}},{key:"setDefaultCheckedKey",value:function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}},{key:"registerNode",value:function(e){this.key&&e&&e.data&&void 0!==e.key&&(this.nodesMap[e.key]=e)}},{key:"deregisterNode",value:function(e){var t=this;this.key&&e&&e.data&&(e.childNodes.forEach((function(e){t.deregisterNode(e)})),delete this.nodesMap[e.key])}},{key:"getCheckedNodes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=function i(r){(r.root?r.root.childNodes:r.childNodes).forEach((function(r){(r.checked||t&&r.indeterminate)&&(!e||e&&r.isLeaf)&&n.push(r.data),i(r)}))};return i(this),n}},{key:"getCheckedKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(t).map((function(t){return(t||{})[e.key]}))}},{key:"getHalfCheckedNodes",value:function(){var e=[];return function t(n){(n.root?n.root.childNodes:n.childNodes).forEach((function(n){n.indeterminate&&e.push(n.data),t(n)}))}(this),e}},{key:"getHalfCheckedKeys",value:function(){var e=this;return this.getHalfCheckedNodes().map((function(t){return(t||{})[e.key]}))}},{key:"_getAllNodes",value:function(){var e=[],t=this.nodesMap;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}},{key:"updateChildren",value:function(e,t){var n=this.nodesMap[e];if(n){for(var i=n.childNodes,r=i.length-1;r>=0;r--){var o=i[r];this.remove(o.data)}for(var a=0,s=t.length;a<s;a++){var d=t[a];this.append(d,n.data)}}}},{key:"_setCheckedKeys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this._getAllNodes().sort((function(e,t){return t.level-e.level})),r=Object.create(null),o=Object.keys(n);i.forEach((function(e){return e.setChecked(!1,!1)}));for(var a=0,s=i.length;a<s;a++){var d=i[a],l=d.data[e].toString(),c=o.indexOf(l)>-1;if(c){for(var u=d.parent;u&&u.level>0;)r[u.data[e]]=!0,u=u.parent;d.isLeaf||this.checkStrictly?d.setChecked(!0,!1):(d.setChecked(!0,!0),t&&(d.setChecked(!1,!1),function e(t){t.childNodes.forEach((function(t){t.isLeaf||t.setChecked(!1,!1),e(t)}))}(d)))}else d.checked&&!r[l]&&d.setChecked(!1,!1)}}},{key:"setCheckedNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.key,i={};e.forEach((function(e){i[(e||{})[n]]=!0})),this._setCheckedKeys(n,t,i)}},{key:"setCheckedKeys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var n=this.key,i={};e.forEach((function(e){i[e]=!0})),this._setCheckedKeys(n,t,i)}},{key:"setDefaultExpandedKeys",value:function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var n=t.getNode(e);n&&n.expand(null,t.autoExpandParent)}))}},{key:"setChecked",value:function(e,t,n){var i=this.getNode(e);i&&i.setChecked(!!t,n)}},{key:"getCurrentNode",value:function(){return this.currentNode}},{key:"setCurrentNode",value:function(e){var t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}},{key:"setUserCurrentNode",value:function(e){var t=e[this.key],n=this.nodesMap[t];this.setCurrentNode(n)}},{key:"setCurrentNodeKey",value:function(e){if(null==e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var t=this.getNode(e);t&&this.setCurrentNode(t)}}])&&be(t.prototype,n),i&&be(t,i),e}(),Se=function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.node.visible,expression:"node.visible"}],ref:"node",staticClass:"nt-tree-node",class:{"is-expanded":t.expanded,"is-current":t.node.isCurrent,"is-hidden":!t.node.visible,"is-focusable":!t.node.disabled,"is-checked":!t.node.disabled&&t.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.draggable},on:{click:function(e){return e.stopPropagation(),t.handleClick.apply(null,arguments)},contextmenu:function(t){return e.handleContextMenu(t)},dragstart:function(e){return e.stopPropagation(),t.handleDragStart.apply(null,arguments)},dragover:function(e){return e.stopPropagation(),t.handleDragOver.apply(null,arguments)},dragend:function(e){return e.stopPropagation(),t.handleDragEnd.apply(null,arguments)},drop:function(e){return e.stopPropagation(),t.handleDrop.apply(null,arguments)}}},[i("div",{staticClass:"nt-tree-node__content",style:{"padding-left":(t.node.level-1)*t.tree.indent+"px"}},[i("span",{class:[{"is-leaf":t.node.isLeaf,expanded:!t.node.isLeaf&&t.expanded},"nt-icon","nt-tree-node__expand-icon",t.tree.iconClass?t.tree.iconClass:"nt-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),t.handleExpandIconClick.apply(null,arguments)}}}),t.node.loading?i("span",{staticClass:"nt-tree-node__loading-icon nt-icon-loading"}):t._e(),i("node-content",{attrs:{node:t.node}})],1),!t.renderAfterExpand||t.childNodeRendered?i("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"nt-tree-node__children",attrs:{role:"group","aria-expanded":t.expanded}},t._l(t.node.childNodes,(function(e){return i("nt-tree-node",{key:t.getNodeKey(e),attrs:{"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:e},on:{"node-expand":t.handleChildNodeExpand}})})),1):t._e()])};function Ee(e,t,n){this.$children.forEach((function(i){i.$options.componentName===e?i.$emit.apply(i,[t].concat(n)):Ee.apply(i,[e,t].concat([n]))}))}Se._withStripped=!0;var $e={methods:{dispatch:function(e,t,n){for(var i=this.$parent||this.$root,r=i.$options.componentName;i&&(!r||r!==e);)(i=i.$parent)&&(r=i.$options.componentName);i&&i.$emit.apply(i,[t].concat(n))},broadcast:function(e,t,n){Ee.call(this,e,t,n)}}},Ie=r({name:"NtTreeNode",componentName:"NtTreeNode",mixins:[$e],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent,n=t.tree,i=this.node,r=i.data,o=i.store;return t.renderContent?t.renderContent.call(t._renderProxy,e,{_self:n.$vnode.context,node:i,data:r,store:o}):n.$scopedSlots.default?n.$scopedSlots.default({node:i,data:r}):e("span",{class:"nt-tree-node__label"},[i.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var t=this;this.$nextTick((function(){return t.expanded=e})),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return ye(this.tree.nodeKey,e.data)},handleSelectChange:function(e,t){this.oldChecked!==e&&this.oldIndeterminate!==t&&this.tree.$emit("check-change",this.node.data,e,t),this.oldChecked=e,this.indeterminate=t},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,t){var n=this;this.node.setChecked(t.target.checked,!this.tree.checkStrictly),this.$nextTick((function(){var e=n.tree.store;n.tree.$emit("check",n.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})}))},handleChildNodeExpand:function(e,t,n){this.broadcast("NtTreeNode","tree-node-expand",t),this.tree.$emit("node-expand",e,t,n)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,t=this.$parent;t.isTree?this.tree=t:this.tree=t.tree;var n=this.tree;n||console.warn("Can not find node's tree.");var i=(n.props||{}).children||"children";this.$watch("node.data.".concat(i),(function(){e.node.updateChildren()})),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",(function(t){e.node!==t&&e.node.collapse()}))}},Se,[],!1,null,null,null);Ie.options.__file="src/packages/tree/src/tree-node.vue";var Ke=r({name:"NtTree",mixins:[$e],components:{NtTreeNode:Ie.exports},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return"暂无数据"}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every((function(e){return!e.visible}))}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,(function(e){e.setAttribute("tabindex",-1)}))},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return ye(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var t=this.store.getNode(e);if(!t)return[];for(var n=[t.data],i=t.parent;i&&i!==this.root;)n.push(i.data),i=i.parent;return n.reverse()},getCheckedNodes:function(e,t){return this.store.getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,t)},setCheckedKeys:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,t)},setChecked:function(e,t,n){this.store.setChecked(e,t,n)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},handleNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.$emit("node-expand",e,t,n)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var t=e.target;if(-1!==t.className.indexOf("nt-tree-node")){var n=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var i,r=this.treeItemArray.indexOf(t);[38,40].indexOf(n)>-1&&(e.preventDefault(),i=38===n?0!==r?r-1:0:r<this.treeItemArray.length-1?r+1:0,this.treeItemArray[i].focus()),[37,39].indexOf(n)>-1&&(e.preventDefault(),t.click());var o=t.querySelector('[type="checkbox"]');[13,32].indexOf(n)>-1&&o&&(e.preventDefault(),o.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new we({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var t=this.dragState;this.$on("tree-node-drag-start",(function(n,i){if("function"==typeof e.allowDrag&&!e.allowDrag(i.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(e){}t.draggingNode=i,e.$emit("node-drag-start",i.node,n)})),this.$on("tree-node-drag-over",(function(n,i){var r=function(e,t){for(var n=e;n&&"BODY"!==n.tagName;){if(n.__vue__&&n.__vue__.$options.name===t)return n.__vue__;n=n.parentNode}return null}(n.target,"ElTreeNode"),o=t.dropNode;o&&o!==r&&B(o.$el,"is-drop-inner");var a=t.draggingNode;if(a&&r){var s=!0,d=!0,l=!0,c=!0;"function"==typeof e.allowDrop&&(s=e.allowDrop(a.node,r.node,"prev"),c=d=e.allowDrop(a.node,r.node,"inner"),l=e.allowDrop(a.node,r.node,"next")),n.dataTransfer.dropEffect=d?"move":"none",(s||d||l)&&o!==r&&(o&&e.$emit("node-drag-leave",a.node,o.node,n),e.$emit("node-drag-enter",a.node,r.node,n)),(s||d||l)&&(t.dropNode=r),r.node.nextSibling===a.node&&(l=!1),r.node.previousSibling===a.node&&(s=!1),r.node.contains(a.node,!1)&&(d=!1),(a.node===r.node||a.node.contains(r.node))&&(s=!1,d=!1,l=!1);var u,h=r.$el.getBoundingClientRect(),f=e.$el.getBoundingClientRect(),p=s?d?.25:l?.45:1:-1,v=l?d?.75:s?.55:0:1,y=-9999,g=n.clientY-h.top;u=g<h.height*p?"before":g>h.height*v?"after":d?"inner":"none";var m=r.$el.querySelector(".nt-tree-node__expand-icon").getBoundingClientRect(),k=e.$refs.dropIndicator;"before"===u?y=m.top-f.top:"after"===u&&(y=m.bottom-f.top),k.style.top=y+"px",k.style.left=m.right-f.left+"px","inner"===u?function(e,t){if(e instanceof Element)for(var n=(t||"").split(" "),i=0,r=n.length;i<r;++i){var o=n[i];o&&e.classList.add(o)}}(r.$el,"is-drop-inner"):B(r.$el,"is-drop-inner"),t.showDropIndicator="before"===u||"after"===u,t.allowDrop=t.showDropIndicator||c,t.dropType=u,e.$emit("node-drag-over",a.node,r.node,n)}})),this.$on("tree-node-drag-end",(function(n){var i=t.draggingNode,r=t.dropType,o=t.dropNode;if(n.preventDefault(),n.dataTransfer.dropEffect="move",i&&o){var a={data:i.node.data};"none"!==r&&i.node.remove(),"before"===r?o.node.parent.insertBefore(a,o.node):"after"===r?o.node.parent.insertAfter(a,o.node):"inner"===r&&o.node.insertChild(a),"none"!==r&&e.store.registerNode(a),B(o.$el,"is-drop-inner"),e.$emit("node-drag-end",i.node,o.node,r,n),"none"!==r&&e.$emit("node-drop",i.node,o.node,r,n)}i&&!o&&e.$emit("node-drag-end",i.node,null,r,n),t.showDropIndicator=!1,t.draggingNode=null,t.dropNode=null,t.allowDrop=!0}))},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},he,[],!1,null,null,null);Ke.options.__file="src/packages/tree/src/tree.vue";var Ae=Ke.exports;Ae.install=function(e){e.component(Ae.name,Ae)};var De=Ae,Le=[s,u,v,N,k,E,A,q,W,G,Q,ue,De],Te=function(e){Le.forEach((function(t){e.component(t.name,t)})),e.prototype.$message=ue};"undefined"!=typeof window&&window.Vue&&Te(window.Vue);t.default={install:Te,Aside:s,Box:u,Button:v,Carousel:N,CarouselItem:k,Figure:E,Header:A,Image:q,Layout:W,ListItem:G,List:Q,Message:ue,Tree:De}}]).default}));